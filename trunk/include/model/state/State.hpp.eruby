
#include "all_fwd.hpp"
#include <boost/tr1/tr1/memory>

<% header_guard do %>

namespace psc{ namespace model{ namespace state{

class State: public std::tr1::enable_shared_from_this<State>{
public:
    State(){}

	State& init(wpCube owner){ owner_ = owner; return *this; }

	virtual ~State(){}
    virtual pState cycle() = 0;

protected:
    Map& map();
    Map const& map() const;
    pCube owner(){ return owner_.lock(); }

private:
    wpCube owner_;
};

}}} // end of namespace

<% end %>
