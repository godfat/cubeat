
<% header_guard do %>

1. map presenter is created.
2. map model is inited.
3. map view is inited.

4. cube presenter list is created, passing map presenter to it.
5. cube model is inited, getting map model.
6. map model gets cube model.

7. cube view is inited, getting map view.
8. map view gets cube view.

#include "all_fwd.hpp"

namespace psc{ namespace presenter{

class Cube{
<%= reader 'model::pCube', :model %>
<%= reader 'view::pCube', :view %>
public:
    Cube(wpMap map, int x, int y, int color_id):
        map_(map),
        model_(model::Cube::create(map->model(), x, y, color_id)),
        view_(view::Cube::create(map->view()), x, y, color_id)
    {}

    int x() const{ return model()->x(); }
    int y() const{ return model()->y(); }

private:
    wpMap map_;
};

}}

<% end %>
