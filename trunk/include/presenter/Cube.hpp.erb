
<% header_guard do %>

typedef MapModel* pMapModel;
typedef CubeModel* pCubeModel;
typedef MapSetting* pMapSetting;
...

1. map presenter is created.
2. map model is inited.
3. map view is inited.

4. cube presenter list is created, passing map presenter to it.
5. cube model is inited, getting map model.
6. map model gets cube model.

7. cube view is inited, getting map view.
8. map view gets cube view.

namespace psc{
    namespace model{
        class Map;
        class Cube;
    }
    namespace presenter{
        class Map;
        class Cube;
    }
    namespace view{
        class Map;
        class Cube;
    }
}

namespace psc{ namespace presenter{

    class Cube{
    public:
        Cube(pMap map, int x, int y, int color_id):
            map_(map),
            model_(model::Cube::create(map->model(), x, y, color_id)),
            view_(view::Cube::create(map->view()), x, y, color_id)
        {}
    private:
        pMap map_;
        model::pCube model_;
        view::pCube view_;
    };
}}

<% end %>
